<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zarządzanie Urlopami</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 8px;
            text-align: center;
        }
        .checked {
            background-color: #d3f8d3;
        }
        button {
            padding: 10px;
            margin-top: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <h1>Zarządzanie Urlopami</h1>
    
    <p>Wybierz daty urlopu dla pracowników:</p>

    <!-- Tabela z danymi -->
    <table id="leaveTable">
        <thead>
            <tr>
                <th>Imię</th>
                <th>19.12.2024</th>
                <th>20.12.2024</th>
                <th>21.12.2024</th>
                <th>22.12.2024</th>
                <!-- Możesz dodać więcej dat w nagłówkach -->
            </tr>
        </thead>
        <tbody>
            <!-- Wiersze z osobami i datami -->
            <tr data-person="Paweł">
                <td>Paweł</td>
                <td><input type="checkbox" class="leaveCheckbox" data-date="2024-12-19"></td>
                <td><input type="checkbox" class="leaveCheckbox" data-date="2024-12-20"></td>
                <td><input type="checkbox" class="leaveCheckbox" data-date="2024-12-21"></td>
                <td><input type="checkbox" class="leaveCheckbox" data-date="2024-12-22"></td>
            </tr>
            <tr data-person="Artur">
                <td>Artur</td>
                <td><input type="checkbox" class="leaveCheckbox" data-date="2024-12-19"></td>
                <td><input type="checkbox" class="leaveCheckbox" data-date="2024-12-20"></td>
                <td><input type="checkbox" class="leaveCheckbox" data-date="2024-12-21"></td>
                <td><input type="checkbox" class="leaveCheckbox" data-date="2024-12-22"></td>
            </tr>
            <!-- Kolejne osoby -->
        </tbody>
    </table>

    <button id="saveButton">Zapisz zmiany</button>
    <button id="resetButton">Resetuj zaznaczenia</button>

    <script>
        // Funkcja zapisująca zaznaczenia do localStorage
        function saveLeaveData() {
            const leaveData = {};
            // Dla każdego wiersza w tabeli
            document.querySelectorAll('tr[data-person]').forEach(row => {
                const person = row.getAttribute('data-person');
                leaveData[person] = [];
                // Sprawdzamy wszystkie checkboxy w danym wierszu
                row.querySelectorAll('.leaveCheckbox').forEach(checkbox => {
                    const date = checkbox.getAttribute('data-date');
                    if (checkbox.checked) {
                        leaveData[person].push(date);
                    }
                });
            });

            // Zapisujemy dane do localStorage
            localStorage.setItem('leaveData', JSON.stringify(leaveData));
            alert('Zmiany zostały zapisane!');
        }

        // Funkcja ładowania danych z localStorage
        function loadLeaveData() {
            const leaveData = JSON.parse(localStorage.getItem('leaveData'));
            if (leaveData) {
                document.querySelectorAll('tr[data-person]').forEach(row => {
                    const person = row.getAttribute('data-person');
                    const personLeaveData = leaveData[person] || [];

                    row.querySelectorAll('.leaveCheckbox').forEach(checkbox => {
                        const date = checkbox.getAttribute('data-date');
                        // Zaznaczamy checkbox, jeśli data urlopu jest w zapisanych danych
                        checkbox.checked = personLeaveData.includes(date);
                    });
                });
            }
        }

        // Funkcja resetująca zaznaczenia
        function resetLeaveData() {
            document.querySelectorAll('.leaveCheckbox').forEach(checkbox => {
                checkbox.checked = false;
            });
        }

        // Ładowanie danych przy starcie aplikacji
        window.onload = loadLeaveData;

        // Zapisz dane po kliknięciu przycisku
        document.getElementById('saveButton').addEventListener('click', saveLeaveData);

        // Resetuj dane po kliknięciu przycisku
        document.getElementById('resetButton').addEventListener('click', resetLeaveData);
    </script>
</body>
</html>
