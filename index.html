<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Urlopy Pracowników</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        table, th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f4f4f4;
        }
        button {
            padding: 8px;
            margin-top: 10px;
            cursor: pointer;
        }
        .highlight {
            background-color: #f2f2f2;
        }
        .input-date {
            margin-top: 10px;
        }
        .remaining-days {
            font-weight: bold;
            color: green;
        }
        .leave-list {
            display: flex;
            flex-direction: column;
        }
        .leave-item {
            margin-bottom: 5px;
        }
        .remove-btn {
            margin-left: 10px;
            background-color: #f44336;
            color: white;
            border: none;
            padding: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <h1>Zarządzanie Urlopami</h1>

    <!-- Sekcja na górze: Kto jest na urlopie na 3 dni do przodu -->
    <h3>Na urlopie w najbliższych 3 dniach:</h3>
    <div id="upcomingLeave"></div>

    <h2>Pracownicy i ich urlopy:</h2>

    <table id="leaveTable">
        <thead>
            <tr>
                <th>Imię</th>
                <th>Urlopy</th>
                <th>Pozostało dni</th>
                <th>Dodaj Urlop</th>
            </tr>
        </thead>
        <tbody>
            <!-- Lista pracowników -->
            <tr data-person="Paweł">
                <td>Paweł</td>
                <td id="leaveList-Paweł" class="leave-list"></td>
                <td id="remaining-Paweł" class="remaining-days">7</td>
                <td><button onclick="addLeave('Paweł')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Artur">
                <td>Artur</td>
                <td id="leaveList-Artur" class="leave-list"></td>
                <td id="remaining-Artur" class="remaining-days">19</td>
                <td><button onclick="addLeave('Artur')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Ewa">
                <td>Ewa</td>
                <td id="leaveList-Ewa" class="leave-list"></td>
                <td id="remaining-Ewa" class="remaining-days">4</td>
                <td><button onclick="addLeave('Ewa')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Radosław">
                <td>Radosław</td>
                <td id="leaveList-Radosław" class="leave-list"></td>
                <td id="remaining-Radosław" class="remaining-days">10</td>
                <td><button onclick="addLeave('Radosław')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Paulina">
                <td>Paulina</td>
                <td id="leaveList-Paulina" class="leave-list"></td>
                <td id="remaining-Paulina" class="remaining-days">10</td>
                <td><button onclick="addLeave('Paulina')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Monika">
                <td>Monika</td>
                <td id="leaveList-Monika" class="leave-list"></td>
                <td id="remaining-Monika" class="remaining-days">4</td>
                <td><button onclick="addLeave('Monika')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Michał">
                <td>Michał</td>
                <td id="leaveList-Michał" class="leave-list"></td>
                <td id="remaining-Michał" class="remaining-days">4</td>
                <td><button onclick="addLeave('Michał')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Ewa B">
                <td>Ewa B</td>
                <td id="leaveList-Ewa B" class="leave-list"></td>
                <td id="remaining-Ewa B" class="remaining-days">4</td>
                <td><button onclick="addLeave('Ewa B')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Dariusz">
                <td>Dariusz</td>
                <td id="leaveList-Dariusz" class="leave-list"></td>
                <td id="remaining-Dariusz" class="remaining-days">8</td>
                <td><button onclick="addLeave('Dariusz')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Kamil P">
                <td>Kamil P</td>
                <td id="leaveList-Kamil P" class="leave-list"></td>
                <td id="remaining-Kamil P" class="remaining-days">10</td>
                <td><button onclick="addLeave('Kamil P')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Marcin S">
                <td>Marcin S</td>
                <td id="leaveList-Marcin S" class="leave-list"></td>
                <td id="remaining-Marcin S" class="remaining-days">10</td>
                <td><button onclick="addLeave('Marcin S')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Daniel">
                <td>Daniel</td>
                <td id="leaveList-Daniel" class="leave-list"></td>
                <td id="remaining-Daniel" class="remaining-days">6</td>
                <td><button onclick="addLeave('Daniel')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Marcin W">
                <td>Marcin W</td>
                <td id="leaveList-Marcin W" class="leave-list"></td>
                <td id="remaining-Marcin W" class="remaining-days">4</td>
                <td><button onclick="addLeave('Marcin W')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Agnieszka">
                <td>Agnieszka</td>
                <td id="leaveList-Agnieszka" class="leave-list"></td>
                <td id="remaining-Agnieszka" class="remaining-days">2</td>
                <td><button onclick="addLeave('Agnieszka')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Karolina">
                <td>Karolina</td>
                <td id="leaveList-Karolina" class="leave-list"></td>
                <td id="remaining-Karolina" class="remaining-days">6</td>
                <td><button onclick="addLeave('Karolina')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Kamil S">
                <td>Kamil S</td>
                <td id="leaveList-Kamil S" class="leave-list"></td>
                <td id="remaining-Kamil S" class="remaining-days">6</td>
                <td><button onclick="addLeave('Kamil S')">Dodaj urlop</button></td>
            </tr>
            <tr data-person="Sebastian">
                <td>Sebastian</td>
                <td id="leaveList-Sebastian" class="leave-list"></td>
                <td id="remaining-Sebastian" class="remaining-days">8</td>
                <td><button onclick="addLeave('Sebastian')">Dodaj urlop</button></td>
            </tr>
        </tbody>
    </table>

    <script>
        const leaveData = {
            "Paweł": { urlopy: [], dniUrlopu: 7 },
            "Artur": { urlopy: [], dniUrlopu: 19 },
            "Ewa": { urlopy: [], dniUrlopu: 4 },
            "Radosław": { urlopy: [], dniUrlopu: 10 },
            "Paulina": { urlopy: [], dniUrlopu: 10 },
            "Monika": { urlopy: [], dniUrlopu: 4 },
            "Michał": { urlopy: [], dniUrlopu: 4 },
            "Ewa B": { urlopy: [], dniUrlopu: 4 },
            "Dariusz": { urlopy: [], dniUrlopu: 8 },
            "Kamil P": { urlopy: [], dniUrlopu: 10 },
            "Marcin S": { urlopy: [], dniUrlopu: 10 },
            "Daniel": { urlopy: [], dniUrlopu: 6 },
            "Marcin W": { urlopy: [], dniUrlopu: 4 },
            "Agnieszka": { urlopy: [], dniUrlopu: 2 },
            "Karolina": { urlopy: [], dniUrlopu: 6 },
            "Kamil S": { urlopy: [], dniUrlopu: 6 },
            "Sebastian": { urlopy: [], dniUrlopu: 8 }
        };

        function addLeave(person) {
            const leaveDate = prompt("Wprowadź datę urlopu (yyyy-mm-dd):");
            if (leaveDate && !leaveData[person].urlopy.includes(leaveDate)) {
                leaveData[person].urlopy.push(leaveDate);
                updateTable();
            } else {
                alert("Data już została dodana lub nieprawidłowy format!");
            }
        }

        function removeLeave(person, date) {
            const index = leaveData[person].urlopy.indexOf(date);
            if (index !== -1) {
                leaveData[person].urlopy.splice(index, 1);
                updateTable();
            }
        }

        function updateTable() {
            Object.keys(leaveData).forEach(person => {
                const leaveList = document.getElementById(`leaveList-${person}`);
                leaveList.innerHTML = "";
                leaveData[person].urlopy.forEach(date => {
                    const leaveItem = document.createElement("div");
                    leaveItem.classList.add("leave-item");
                    leaveItem.innerHTML = `${date} <button class="remove-btn" onclick="removeLeave('${person}', '${date}')">Usuń</button>`;
                    leaveList.appendChild(leaveItem);
                });
                
                // Obliczanie pozostałych dni urlopu
                const remainingDays = 26 - leaveData[person].urlopy.length;
                document.getElementById(`remaining-${person}`).textContent = remainingDays;
            });
        }

        function showUpcomingLeaves() {
            const upcomingLeave = document.getElementById("upcomingLeave");
            upcomingLeave.innerHTML = ""; // Clear previous data

            const today = new Date();
            for (let i = 0; i < 3; i++) {
                const checkDate = new Date(today);
                checkDate.setDate(today.getDate() + i);
                const formattedDate = checkDate.toISOString().split("T")[0];

                const onLeaveList = [];
                Object.keys(leaveData).forEach(person => {
                    if (leaveData[person].urlopy.includes(formattedDate)) {
                        onLeaveList.push(person);
                    }
                });

                if (onLeaveList.length > 0) {
                    const listItem = document.createElement("div");
                    listItem.innerHTML = `${formattedDate}: ${onLeaveList.join(", ")} na urlopie`;
                    upcomingLeave.appendChild(listItem);
                }
            }
        }

        // Call on page load
        updateTable();
        showUpcomingLeaves();
    </script>

</body>
</html>
