<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Urlopów</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .vacation-list, .all-employees-list {
            margin-top: 20px;
        }
        .vacation-item, .employee-item {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .vacation-item button, .employee-item button {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 3px;
        }
        .vacation-item button:hover, .employee-item button:hover {
            background-color: #d32f2f;
        }
        .remaining-days {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Na urlopie w nadchodzących dniach:</h1>
    <div class="vacation-list" id="vacationList"></div>

    <h1>Lista wszystkich pracowników:</h1>
    <div class="all-employees-list" id="employeeList"></div>

    <script>
        // Obiekt z danymi urlopów
        const vacationData = {
            "Paweł": {
                remaining: 7, 
                daysOff: ["19.11.2024", "20.11.2024", "21.11.2024"]
            },
            "Artur": {
                remaining: 19,
                daysOff: ["22.11.2024", "23.11.2024", "25.11.2024"]
            },
            "Ewa": {
                remaining: 4,
                daysOff: ["25.11.2024", "26.11.2024"]
            },
            "Radosław": {
                remaining: 10,
                daysOff: ["25.11.2024", "26.11.2024"]
            },
            "Paulina": {
                remaining: 10,
                daysOff: ["19.11.2024", "21.11.2024"]
            },
            // Dodaj resztę osób
        };

        // Funkcja renderująca listę osób z pozostałymi dniami urlopu
        function renderEmployeeList() {
            const employeeList = document.getElementById('employeeList');
            employeeList.innerHTML = ''; // Wyczyść poprzednią listę

            for (let name in vacationData) {
                const employeeData = vacationData[name];

                const employeeDiv = document.createElement('div');
                employeeDiv.classList.add('employee-item');
                employeeDiv.innerHTML = `
                    <strong>${name}</strong> - Pozostało dni urlopu: <span class="remaining-days">${employeeData.remaining}</span>
                    <button onclick="addVacationDay('${name}')">Dodaj urlop</button>
                `;
                employeeList.appendChild(employeeDiv);
            }
        }

        // Funkcja renderująca listę osób na urlopie w nadchodzących dniach
        function renderVacationList() {
            const vacationList = document.getElementById('vacationList');
            vacationList.innerHTML = ''; // Wyczyść poprzednią listę

            // Iteruj przez obiekt vacationData
            for (let name in vacationData) {
                const personData = vacationData[name];

                // Filtruj urlopy, które są w przyszłości (od dzisiaj)
                const upcomingDaysOff = personData.daysOff.filter(date => new Date(date) >= new Date());

                if (upcomingDaysOff.length > 0) {
                    const personDiv = document.createElement('div');
                    personDiv.classList.add('vacation-item');

                    // Wstawiamy dane do HTML
                    personDiv.innerHTML = `
                        <strong>${name}</strong> - ${upcomingDaysOff.join(', ')} (${personData.remaining} dni urlopu)
                        <button onclick="removeDay('${name}', '${upcomingDaysOff[0]}')">Usuń ${upcomingDaysOff[0]}</button>
                    `;
                    vacationList.appendChild(personDiv);
                }
            }
        }

        // Funkcja dodająca dzień urlopu
        function addVacationDay(name) {
            const personData = vacationData[name];
            if (personData.remaining > 0) {
                const today = new Date().toLocaleDateString();
                // Dodaj dzień urlopu
                personData.daysOff.push(today);
                personData.remaining--; // Zmniejsz liczbę pozostałych dni urlopu
                renderVacationList();
            } else {
                alert("Brak dni urlopu!");
            }
        }

        // Funkcja usuwająca dzień urlopu
        function removeDay(name, day) {
            const personData = vacationData[name];
            // Usuń dzień urlopu z listy
            const index = personData.daysOff.indexOf(day);
            if (index > -1) {
                personData.daysOff.splice(index, 1);
                personData.remaining++; // Zwiększ liczbę pozostałych dni urlopu
                renderVacationList();
            }
        }

        // Renderowanie listy po załadowaniu strony
        window.onload = function() {
            renderVacationList();
            renderEmployeeList();
        };
    </script>
</body>
</html>
